import{G as oe}from"./GLTFLoader-Bzr6GmPM.js";import{k as ae,bb as ce,bc as ue,r as le,l as fe,V as A,h as he,O as de,ak as me,ax as j,W as pe,aD as G,b as ye,bd as xe,be as Ae,bf as Te,bg as we,F as Ee}from"./three.module-CQU0seT4.js";function y(i,e,t){return i&&e in i?i[e]:t}function ee(i){return i!=="BOOLEAN"&&i!=="STRING"&&i!=="ENUM"}function be(i){return/^FLOAT/.test(i)}function C(i){return/^VEC/.test(i)}function D(i){return/^MAT/.test(i)}function te(i,e,t,s=null){return D(t)||C(t)?s.fromArray(i,e):i[e]}function P(i){const{type:e,componentType:t}=i;switch(e){case"SCALAR":return t==="INT64"?0n:0;case"VEC2":return new A;case"VEC3":return new fe;case"VEC4":return new le;case"MAT2":return new ue;case"MAT3":return new ce;case"MAT4":return new ae;case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return 0}}function z(i,e){if(e==null)return!1;switch(i){case"SCALAR":return typeof e=="number"||typeof e=="bigint";case"VEC2":return e.isVector2;case"VEC3":return e.isVector3;case"VEC4":return e.isVector4;case"MAT2":return e.isMatrix2;case"MAT3":return e.isMatrix3;case"MAT4":return e.isMatrix4;case"BOOLEAN":return typeof e=="boolean";case"STRING":return typeof e=="string";case"ENUM":return typeof e=="number"||typeof e=="bigint"}throw new Error("ClassProperty: invalid type.")}function O(i,e=null){switch(i){case"INT8":return Int8Array;case"INT16":return Int16Array;case"INT32":return Int32Array;case"INT64":return BigInt64Array;case"UINT8":return Uint8Array;case"UINT16":return Uint16Array;case"UINT32":return Uint32Array;case"UINT64":return BigUint64Array;case"FLOAT32":return Float32Array;case"FLOAT64":return Float64Array}switch(e){case"BOOLEAN":return Uint8Array;case"STRING":return Uint8Array}throw new Error("ClassProperty: invalid type.")}function ge(i,e=null){if(i.array){e=e&&Array.isArray(e)?e:[],e.length=i.count;for(let s=0,r=e.length;s<r;s++)e[s]=M(i,e[s])}else e=M(i,e);return e}function M(i,e=null){const t=i.default,s=i.type;if(e=e||P(i),t===null){switch(s){case"SCALAR":return 0;case"VEC2":return e.set(0,0);case"VEC3":return e.set(0,0,0);case"VEC4":return e.set(0,0,0,0);case"MAT2":return e.identity();case"MAT3":return e.identity();case"MAT4":return e.identity();case"BOOLEAN":return!1;case"STRING":return"";case"ENUM":return""}throw new Error("ClassProperty: invalid type.")}else if(D(s))e.fromArray(t);else if(C(s))e.fromArray(t);else return t}function Ie(i,e){if(i.noData===null)return e;const t=i.noData,s=i.type;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o++)e[o]=r(e[o]);else e=r(e);return e;function r(o){return n(o)&&(o=M(i,o)),o}function n(o){if(D(s)){const a=o.elements;for(let c=0,f=t.length;c<f;c++)if(t[c]!==a[c])return!1;return!0}else if(C(s)){for(let a=0,c=t.length;a<c;a++)if(t[a]!==o.getComponent(a))return!1;return!0}else return t===o}}function Ne(i,e){switch(i){case"INT8":return Math.max(e/127,-1);case"INT16":return Math.max(e,32767,-1);case"INT32":return Math.max(e/2147483647,-1);case"INT64":return Math.max(Number(e)/9223372036854776e3,-1);case"UINT8":return e/255;case"UINT16":return e/65535;case"UINT32":return e/4294967295;case"UINT64":return Number(e)/18446744073709552e3}}function _e(i,e){const{type:t,componentType:s,scale:r,offset:n,normalized:o}=i;if(Array.isArray(e))for(let u=0,l=e.length;u<l;u++)e[u]=a(e[u]);else e=a(e);return e;function a(u){return D(t)?u=f(u):C(t)?u=c(u):u=p(u),u}function c(u){return u.x=p(u.x),u.y=p(u.y),"z"in u&&(u.z=p(u.z)),"w"in u&&(u.w=p(u.w)),u}function f(u){const l=u.elements;for(let d=0,m=l.length;d<m;d++)l[d]=p(l[d]);return u}function p(u){return o&&(u=Ne(s,u)),(o||be(s))&&(u=u*r+n),u}}function U(i,e,t=null){if(i.array){Array.isArray(e)||(e=new Array(i.count||0)),e.length=t!==null?t:i.count;for(let s=0,r=e.length;s<r;s++)z(i.type,e[s])||(e[s]=P(i))}else z(i.type,e)||(e=P(i));return e}function R(i,e){for(const t in e)t in i||delete e[t];for(const t in i){const s=i[t];e[t]=U(s,e[t])}}function Oe(i){switch(i){case"ENUM":return 1;case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;case"BOOLEAN":return-1;case"STRING":return-1;default:return-1}}class V{constructor(e,t,s=null){this.name=t.name||null,this.description=t.description||null,this.type=t.type,this.componentType=t.componentType||null,this.enumType=t.enumType||null,this.array=t.array||!1,this.count=t.count||0,this.normalized=t.normalized||!1,this.offset=t.offset||0,this.scale=y(t,"scale",1),this.max=y(t,"max",1/0),this.min=y(t,"min",-1/0),this.required=t.required||!1,this.noData=y(t,"noData",null),this.default=y(t,"default",null),this.semantic=y(t,"semantic",null),this.enumSet=null,this.accessorProperty=s,s&&(this.offset=y(s,"offset",this.offset),this.scale=y(s,"scale",this.scale),this.max=y(s,"max",this.max),this.min=y(s,"min",this.min)),t.type==="ENUM"&&(this.enumSet=e[this.enumType],this.componentType===null&&(this.componentType=y(this.enumSet,"valueType","UINT16")))}shapeToProperty(e,t=null){return U(this,e,t)}resolveDefaultElement(e){return M(this,e)}resolveDefault(e){return ge(this,e)}resolveNoData(e){return Ie(this,e)}resolveEnumsToStrings(e){const t=this.enumSet;if(this.type==="ENUM")if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=s(e[r]);else e=s(e);return e;function s(r){const n=t.values.find(o=>o.value===r);return n===null?"":n.name}}adjustValueScaleOffset(e){return ee(this.type)?_e(this,e):e}}class B{constructor(e,t={},s={},r=null){this.definition=e,this.class=t[e.class],this.className=e.class,this.enums=s,this.data=r,this.name="name"in e?e.name:null,this.properties=null}getPropertyNames(){return Object.keys(this.class.properties)}includesData(e){return!!this.definition.properties[e]}dispose(){}_initProperties(e=V){const t={};for(const s in this.class.properties)t[s]=new e(this.enums,this.class.properties[s],this.definition.properties[s]);this.properties=t}}class Ce extends V{constructor(e,t,s=null){super(e,t,s),this.attribute=(s==null?void 0:s.attribute)??null}}class De extends B{constructor(...e){super(...e),this.isPropertyAttributeAccessor=!0,this._initProperties(Ce)}getData(e,t,s={}){const r=this.properties;R(r,s);for(const n in r)s[n]=this.getPropertyValue(n,e,t,s[n]);return s}getPropertyValue(e,t,s,r=null){if(t>=this.count)throw new Error("PropertyAttributeAccessor: Requested index is outside the range of the buffer.");const n=this.properties[e],o=n.type;if(n){if(!this.definition.properties[e])return n.resolveDefault(r)}else throw new Error("PropertyAttributeAccessor: Requested class property does not exist.");r=n.shapeToProperty(r);const a=s.getAttribute(n.attribute.toLowerCase());if(D(o)){const c=r.elements;for(let f=0,p=c.length;f<p;f<p)c[f]=a.getComponent(t,f)}else if(C(o))r.fromBufferAttribute(a,t);else if(o==="SCALAR"||o==="ENUM")r=a.getX(t);else throw new Error("StructuredMetadata.PropertyAttributeAccessor: BOOLEAN and STRING types are not supported by property attributes.");return r=n.adjustValueScaleOffset(r),r=n.resolveEnumsToStrings(r),r=n.resolveNoData(r),r}}class Me extends V{constructor(e,t,s=null){super(e,t,s),this.values=(s==null?void 0:s.values)??null,this.valueLength=Oe(this.type),this.arrayOffsets=y(s,"arrayOffsets",null),this.stringOffsets=y(s,"stringOffsets",null),this.arrayOffsetType=y(s,"arrayOffsetType","UINT32"),this.stringOffsetType=y(s,"stringOffsetType","UINT32")}getArrayLengthFromId(e,t){let s=this.count;if(this.arrayOffsets!==null){const{arrayOffsets:r,arrayOffsetType:n}=this,o=O(n),a=new o(e[r]);s=a[t+1]-a[t]}return s}getIndexOffsetFromId(e,t){let s=t;if(this.arrayOffsets){const{arrayOffsets:r,arrayOffsetType:n}=this,o=O(n);s=new o(e[r])[s]}else this.array&&(s*=this.count);return s}}class Re extends B{constructor(...e){super(...e),this.isPropertyTableAccessor=!0,this.count=this.definition.count,this._initProperties(Me)}getData(e,t={}){const s=this.properties;R(s,t);for(const r in s)t[r]=this.getPropertyValue(r,e,t[r]);return t}_readValueAtIndex(e,t,s,r=null){const n=this.properties[e],{componentType:o,type:a}=n,c=this.data,f=c[n.values],p=O(o,a),u=new p(f),l=n.getIndexOffsetFromId(c,t);if(ee(a)||a==="ENUM")return te(u,(l+s)*n.valueLength,a,r);if(a==="STRING"){let d=l+s,m=0;if(n.stringOffsets!==null){const{stringOffsets:x,stringOffsetType:T}=n,b=O(T),w=new b(c[x]);m=w[d+1]-w[d],d=w[d]}const h=new Uint8Array(u.buffer,d,m);r=new TextDecoder().decode(h)}else if(a==="BOOLEAN"){const d=l+s,m=Math.floor(d/8),h=d%8;r=(u[m]>>h&1)===1}return r}getPropertyValue(e,t,s=null){if(t>=this.count)throw new Error("PropertyTableAccessor: Requested index is outside the range of the table.");const r=this.properties[e];if(r){if(!this.definition.properties[e])return r.resolveDefault(s)}else throw new Error("PropertyTableAccessor: Requested property does not exist.");const n=r.array,o=this.data,a=r.getArrayLengthFromId(o,t);if(s=r.shapeToProperty(s,a),n)for(let c=0,f=s.length;c<f;c++)s[c]=this._readValueAtIndex(e,t,c,s[c]);else s=this._readValueAtIndex(e,t,0,s);return s=r.adjustValueScaleOffset(s),s=r.resolveEnumsToStrings(s),s=r.resolveNoData(s),s}}const Le=new de(-1,1,1,-1,0,1);class Ve extends me{constructor(){super(),this.setAttribute("position",new j([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new j([0,2,0,0,2,0],2))}}const Se=new Ve;class Fe{constructor(e){this._mesh=new he(Se,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Le)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const N=new we;class v{constructor(){this._renderer=new pe,this._target=new G(1,1),this._texTarget=new G,this._quad=new Fe(new ye({blending:Te,blendDst:Ae,blendSrc:xe,uniforms:{map:{value:null},pixel:{value:new A}},vertexShader:`
				void main() {

					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

				}
			`,fragmentShader:`
				uniform sampler2D map;
				uniform ivec2 pixel;

				void main() {

					gl_FragColor = texelFetch( map, pixel, 0 );

				}
			`}))}increaseSizeTo(e){this._target.setSize(Math.max(this._target.width,e),1)}readDataAsync(e){const{_renderer:t,_target:s}=this;return t.readRenderTargetPixelsAsync(s,0,0,e.length/4,1,e)}readData(e){const{_renderer:t,_target:s}=this;t.readRenderTargetPixels(s,0,0,e.length/4,1,e)}renderPixelToTarget(e,t,s){const{_renderer:r,_target:n}=this;N.min.copy(t),N.max.copy(t),N.max.x+=1,N.max.y+=1,r.initRenderTarget(n),r.copyTextureToTexture(e,n.texture,N,s,0)}}const E=new class{constructor(){let i=null;Object.getOwnPropertyNames(v.prototype).forEach(e=>{e!=="constructor"&&(this[e]=(...t)=>(i=i||new v,i[e](...t)))})}},k=new A,q=new A,X=new A;function Pe(i,e){return e===0?i.getAttribute("uv"):i.getAttribute(`uv${e}`)}function se(i,e,t=new Array(3)){let s=3*e,r=3*e+1,n=3*e+2;return i.index&&(s=i.index.getX(s),r=i.index.getX(r),n=i.index.getX(n)),t[0]=s,t[1]=r,t[2]=n,t}function re(i,e,t,s,r){const[n,o,a]=s,c=Pe(i,e);k.fromBufferAttribute(c,n),q.fromBufferAttribute(c,o),X.fromBufferAttribute(c,a),r.set(0,0,0).addScaledVector(k,t.x).addScaledVector(q,t.y).addScaledVector(X,t.z)}function ne(i,e,t,s){const r=i.x-Math.floor(i.x),n=i.y-Math.floor(i.y),o=Math.floor(r*e%e),a=Math.floor(n*t%t);return s.set(o,a),s}const $=new A,H=new A,W=new A;class Ue extends V{constructor(e,t,s=null){super(e,t,s),this.channels=y(s,"channels",[0]),this.index=y(s,"index",null),this.texCoord=y(s,"texCoord",null),this.valueLength=parseInt(this.type.replace(/[^0-9]/g,""))||1}readDataFromBuffer(e,t,s=null){const r=this.type;if(r==="BOOLEAN"||r==="STRING")throw new Error("PropertyTextureAccessor: BOOLEAN and STRING types not supported.");return te(e,t*this.valueLength,r,s)}}class Be extends B{constructor(...e){super(...e),this.isPropertyTextureAccessor=!0,this._asyncRead=!1,this._initProperties(Ue)}getData(e,t,s,r={}){const n=this.properties;R(n,r);const o=Object.keys(n),a=o.map(c=>r[c]);return this.getPropertyValuesAtTexel(o,e,t,s,a),o.forEach((c,f)=>r[c]=a[f]),r}async getDataAsync(e,t,s,r={}){const n=this.properties;R(n,r);const o=Object.keys(n),a=o.map(c=>r[c]);return await this.getPropertyValuesAtTexelAsync(o,e,t,s,a),o.forEach((c,f)=>r[c]=a[f]),r}getPropertyValuesAtTexelAsync(...e){this._asyncRead=!0;const t=this.getPropertyValuesAtTexel(...e);return this._asyncRead=!1,t}getPropertyValuesAtTexel(e,t,s,r,n=[]){for(;n.length<e.length;)n.push(null);n.length=e.length,E.increaseSizeTo(n.length);const o=this.data,a=this.definition.properties,c=this.properties,f=se(r,t);for(let l=0,d=e.length;l<d;l++){const m=e[l];if(!a[m])continue;const h=c[m],x=o[h.index];re(r,h.texCoord,s,f,$),ne($,x.image.width,x.image.height,H),W.set(l,0),E.renderPixelToTarget(x,H,W)}const p=new Uint8Array(e.length*4);if(this._asyncRead)return E.readDataAsync(p).then(()=>(u.call(this),n));return E.readData(p),u.call(this),n;function u(){for(let l=0,d=e.length;l<d;l++){const m=e[l],h=c[m],x=h.type;if(n[l]=U(h,n[l]),h){if(!a[m]){n[l]=h.resolveDefault(n);continue}}else throw new Error("PropertyTextureAccessor: Requested property does not exist.");const T=h.valueLength*(h.count||1),b=h.channels.map(g=>p[4*l+g]),w=h.componentType,S=O(w,x),F=new S(T);if(new Uint8Array(F.buffer).set(b),h.array){const g=n[l];for(let I=0,ie=g.length;I<ie;I++)g[I]=h.readDataFromBuffer(F,I,g[I])}else n[l]=h.readDataFromBuffer(F,0,n[l]);n[l]=h.adjustValueScaleOffset(n[l]),n[l]=h.resolveEnumsToStrings(n[l]),n[l]=h.resolveNoData(n[l])}}}dispose(){this.data.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}class K{constructor(e,t,s,r=null,n=null){const{schema:o,propertyTables:a=[],propertyTextures:c=[],propertyAttributes:f=[]}=e,{enums:p,classes:u}=o,l=a.map(h=>new Re(h,u,p,s));let d=[],m=[];r&&(r.propertyTextures&&(d=r.propertyTextures.map(h=>new Be(c[h],u,p,t))),r.propertyAttributes&&(m=r.propertyAttributes.map(h=>new De(f[h],u,p)))),this.schema=o,this.tableAccessors=l,this.textureAccessors=d,this.attributeAccessors=m,this.object=n,this.textures=t,this.nodeMetadata=r}getPropertyTableData(e,t,s=null){if(!Array.isArray(e)||!Array.isArray(t))s=s||{},s=this.tableAccessors[e].getData(t,s);else{s=s||[];const r=Math.min(e.length,t.length);s.length=r;for(let n=0;n<r;n++){const o=this.tableAccessors[e[n]];s[n]=o.getData(t[n],s[n])}}return s}getPropertyTableInfo(e=null){if(e===null&&(e=this.tableAccessors.map((t,s)=>s)),Array.isArray(e))return e.map(t=>{const s=this.tableAccessors[t];return{name:s.name,className:s.definition.class}});{const t=this.tableAccessors[e];return{name:t.name,className:t.definition.class}}}getPropertyTextureData(e,t,s=[]){const r=this.textureAccessors;s.length=r.length;for(let n=0;n<r.length;n++){const o=r[n];s[n]=o.getData(e,t,this.object.geometry,s[n])}return s}async getPropertyTextureDataAsync(e,t,s=[]){const r=this.textureAccessors;s.length=r.length;const n=[];for(let o=0;o<r.length;o++){const c=r[o].getDataAsync(e,t,this.object.geometry,s[o]).then(f=>{s[o]=f});n.push(c)}return await Promise.all(n),s}getPropertyTextureInfo(){return this.textureAccessors}getPropertyAttributeData(e,t=[]){const s=this.attributeAccessors;t.length=s.length;for(let r=0;r<s.length;r++){const n=s[r];t[r]=n.getData(e,this.object.geometry,t[r])}return t}getPropertyAttributeInfo(){return this.attributeAccessors.map(e=>({name:e.name,className:e.definition.class}))}dispose(){this.textureAccessors.forEach(e=>e.dispose()),this.tableAccessors.forEach(e=>e.dispose()),this.attributeAccessors.forEach(e=>e.dispose())}}const _="EXT_structural_metadata";function je(i,e=[]){var r;const t=((r=i.json.textures)==null?void 0:r.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:n})=>{for(const o in n){const{index:a}=n[o];s[a]===null&&(s[a]=i.loadTexture(a))}}),Promise.all(s)}function Ge(i,e=[]){var r;const t=((r=i.json.bufferViews)==null?void 0:r.length)||0,s=new Array(t).fill(null);return e.forEach(({properties:n})=>{for(const o in n){const{values:a,arrayOffsets:c,stringOffsets:f}=n[o];s[a]===null&&(s[a]=i.loadBufferView(a)),s[c]===null&&(s[c]=i.loadBufferView(c)),s[f]===null&&(s[f]=i.loadBufferView(f))}}),Promise.all(s)}class ze{constructor(e){this.parser=e,this.name=_}async afterRoot({scene:e,parser:t}){const s=t.json.extensionsUsed;if(!s||!s.includes(_))return;let r=null,n=t.json.extensions[_];if(n.schemaUri){const{manager:f,path:p,requestHeader:u,crossOrigin:l}=t.options,d=new URL(n.schemaUri,p).toString(),m=new Ee(f);m.setCrossOrigin(l),m.setResponseType("json"),m.setRequestHeader(u),r=m.loadAsync(d).then(h=>{n={...n,schema:h}})}const[o,a]=await Promise.all([je(t,n.propertyTextures),Ge(t,n.propertyTables),r]),c=new K(n,o,a);e.userData.structuralMetadata=c,e.traverse(f=>{var p;if(t.associations.has(f)){const{meshes:u,primitives:l}=t.associations.get(f),d=(p=t.json.meshes[u])==null?void 0:p.primitives[l];if(d&&d.extensions&&d.extensions[_]){const m=d.extensions[_];f.userData.structuralMetadata=new K(n,o,a,m,f)}else f.userData.structuralMetadata=c}})}}const Q=new A,Z=new A,J=new A;function ve(i){return i.x>i.y&&i.x>i.z?0:i.y>i.z?1:2}class ke{constructor(e,t,s){this.geometry=e,this.textures=t,this.data=s,this._asyncRead=!1,this.featureIds=s.featureIds.map(r=>{const{texture:n,...o}=r,a={label:null,propertyTable:null,nullFeatureId:null,...o};return n&&(a.texture={texCoord:0,channels:[0],...n}),a})}getTextures(){return this.textures}getFeatureInfo(){return this.featureIds}getFeaturesAsync(...e){this._asyncRead=!0;const t=this.getFeatures(...e);return this._asyncRead=!1,t}getFeatures(e,t){const{geometry:s,textures:r,featureIds:n}=this,o=new Array(n.length).fill(null),a=n.length;E.increaseSizeTo(a);const c=se(s,e),f=c[ve(t)];for(let l=0,d=n.length;l<d;l++){const m=n[l],h="nullFeatureId"in m?m.nullFeatureId:null;if("texture"in m){const x=r[m.texture.index];re(s,m.texture.texCoord,t,c,Q),ne(Q,x.image.width,x.image.height,Z),J.set(l,0),E.renderPixelToTarget(r[m.texture.index],Z,J)}else if("attribute"in m){const T=s.getAttribute(`_feature_id_${m.attribute}`).getX(f);T!==h&&(o[l]=T)}else{const x=f;x!==h&&(o[l]=x)}}const p=new Uint8Array(a*4);if(this._asyncRead)return E.readDataAsync(p).then(()=>(u(),o));return E.readData(p),u(),o;function u(){const l=new Uint32Array(1);for(let d=0,m=n.length;d<m;d++){const h=n[d],x="nullFeatureId"in h?h.nullFeatureId:null;if("texture"in h){const{channels:T}=h.texture,b=T.map(S=>p[4*d+S]);new Uint8Array(l.buffer).set(b);const w=l[0];w!==x&&(o[d]=w)}}}}dispose(){this.textures.forEach(e=>{e&&(e.dispose(),e.image instanceof ImageBitmap&&e.image.close())})}}const L="EXT_mesh_features";function Y(i,e,t){i.traverse(s=>{var r;if(e.associations.has(s)){const{meshes:n,primitives:o}=e.associations.get(s),a=(r=e.json.meshes[n])==null?void 0:r.primitives[o];a&&a.extensions&&a.extensions[L]&&t(s,a.extensions[L])}})}class qe{constructor(e){this.parser=e,this.name=L}async afterRoot({scene:e,parser:t}){var a;const s=t.json.extensionsUsed;if(!s||!s.includes(L))return;const r=((a=t.json.textures)==null?void 0:a.length)||0,n=new Array(r).fill(null);Y(e,t,(c,{featureIds:f})=>{f.forEach(p=>{if(p.texture&&n[p.texture.index]===null){const u=p.texture.index;n[u]=t.loadTexture(u)}})});const o=await Promise.all(n);Y(e,t,(c,f)=>{c.userData.meshFeatures=new ke(c.geometry,o,f)})}}class Xe{constructor(){this.name="CESIUM_RTC"}afterRoot(e){if(e.parser.json.extensions&&e.parser.json.extensions.CESIUM_RTC){const{center:t}=e.parser.json.extensions.CESIUM_RTC;t&&(e.scene.position.x+=t[0],e.scene.position.y+=t[1],e.scene.position.z+=t[2])}}}class We{constructor(e){e={metadata:!0,rtc:!0,plugins:[],dracoLoader:null,ktxLoader:null,meshoptDecoder:null,autoDispose:!0,...e},this.tiles=null,this.metadata=e.metadata,this.rtc=e.rtc,this.plugins=e.plugins,this.dracoLoader=e.dracoLoader,this.ktxLoader=e.ktxLoader,this.meshoptDecoder=e.meshoptDecoder,this._gltfRegex=/\.(gltf|glb)$/g,this._dracoRegex=/\.drc$/g,this._loader=null}init(e){const t=new oe(e.manager);this.dracoLoader&&(t.setDRACOLoader(this.dracoLoader),e.manager.addHandler(this._dracoRegex,this.dracoLoader)),this.ktxLoader&&t.setKTX2Loader(this.ktxLoader),this.meshoptDecoder&&t.setMeshoptDecoder(this.meshoptDecoder),this.rtc&&t.register(()=>new Xe),this.metadata&&(t.register(()=>new ze),t.register(()=>new qe)),this.plugins.forEach(s=>t.register(s)),e.manager.addHandler(this._gltfRegex,t),this.tiles=e,this._loader=t}dispose(){this.tiles.manager.removeHandler(this._gltfRegex),this.tiles.manager.removeHandler(this._dracoRegex),this.autoDispose&&(this.ktxLoader.dispose(),this.dracoLoader.dispose())}}export{Fe as F,We as G};
//# sourceMappingURL=GLTFExtensionsPlugin-DKG5_O3O.js.map
